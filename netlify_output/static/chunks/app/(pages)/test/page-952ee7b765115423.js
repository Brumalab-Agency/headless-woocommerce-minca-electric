(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{10192:function(t,e,n){Promise.resolve().then(n.bind(n,94010)),Promise.resolve().then(n.bind(n,65469)),Promise.resolve().then(n.t.bind(n,25250,23))},94010:function(t,e,n){"use strict";n.r(e),n.d(e,{AddToCart:function(){return s}});var o=n(57437),r=n(37105),l=n(2265),i=n(63946),c=n(8792),a=n(16480),u=n.n(a);let s=t=>{let{producto:e}=t,[n,a]=(0,l.useContext)(i.AppContext),[s,d]=(0,l.useState)(!1),[h,g]=(0,l.useState)(!1),v=u()("duration-500 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow",{"bg-white hover:bg-gray-100":!h,"bg-gray-200":h});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:v,onClick:()=>{var t;return(0,r.Xq)(null!==(t=null==e?void 0:e.databaseId)&&void 0!==t?t:0,1,a,d,g)},disabled:h,children:h?"Agregando...":"Agregar al carrito"}),s&&!h?(0,o.jsx)(c.default,{href:"/productos",className:"inline-block rounded border border-indigo-600 bg-indigo-600 px-12 py-3 text-sm font-medium text-white hover:bg-transparent hover:text-indigo-600 focus:outline-none focus:ring active:text-indigo-500",onClick:()=>{var t;return(0,r.Xq)(null!==(t=e.databaseId)&&void 0!==t?t:0)},children:"Ver carrito"}):null]})};e.default=s},37105:function(t,e,n){"use strict";n.d(e,{Xq:function(){return h},LL:function(){return b},GR:function(){return f},xu:function(){return v}});var o=n(70331),r=n.n(o);let l=t=>{if(r()(t))return null;localStorage.setItem("x-wc-session",t)},i=()=>localStorage.getItem("x-wc-session"),c=()=>{let t={headers:{"X-Headless-CMS":!0}},e=i();return r()(e)||(t.headers["x-wc-session"]=e),t};var a=n(7908),u=n(11582),s=n(95059),d=n.n(s);let h=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,d=i(),h=c();s(!0),a.Z.post(u.Qw,{product_id:t,quantity:e},h).then(t=>{if(r()(d)){var e;l(null==t?void 0:null===(e=t.headers)||void 0===e?void 0:e["x-wc-session"])}o(!0),s(!1),g(n)}).catch(t=>{console.log("err",t)})},g=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n=c();a.Z.get(u.Qw,n).then(n=>{var o;t(w(null!==(o=null==n?void 0:n.data)&&void 0!==o?o:[])),e(!1)}).catch(t=>{console.log("err",t),e(!1)})},v=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,r=c();o(!0),a.Z.put("".concat(u.Qw).concat(t),{quantity:e},r).then(t=>{g(n,o)}).catch(t=>{console.log("err",t),o(!1)})},f=(t,e,n)=>{let o=c();n(!0),a.Z.delete("".concat(u.Qw).concat(t),o).then(t=>{g(e,n)}).catch(t=>{console.log("err",t),n(!1)})},b=async(t,e)=>{e(!0);let n=c();try{await a.Z.delete(u.Qw,n),g(t,e)}catch(t){console.log("err",t),e(!1)}},w=t=>{if(!t.length)return null;let e=m(t||[]);return{cartItems:t||[],...e}},m=t=>{let e={totalQty:0,totalPrice:0};return d()(t)&&(null==t?void 0:t.length)&&t.forEach((t,n)=>{var o,r;e.totalQty+=null!==(o=null==t?void 0:t.quantity)&&void 0!==o?o:0,e.totalPrice+=null!==(r=null==t?void 0:t.line_total)&&void 0!==r?r:0}),e}},11582:function(t,e,n){"use strict";n.d(e,{Qw:function(){return o},yd:function(){return r}});let o="".concat("https://test.mincaelectric.com","/wp-json/rae/v1/cart/items/"),r="".concat("https://test.mincaelectric.com","/wp-json/rae/v1/wc/states")}},function(t){t.O(0,[384,32,908,331,469,971,69,744],function(){return t(t.s=10192)}),_N_E=t.O()}]);